{{- $title := .Page.Title}}
{{ $ISO8601 := "2006-01-02T15:04:05-07:00" }}
{{ $description := "" }}
{{ with .Description }}
  {{ $description = . }}
{{ else }}
  {{ if .IsPage }}
    {{ $description = .Summary }}
  {{ else }}
    {{ with .Site.Params.description }}
      {{ $description = . }}
    {{ end }}
  {{ end }}
{{ end }}

<!-- PAGE METADATA -->
<meta charset="utf-8">
<title>{{ $title }}</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="robots" content="follow, index">
<meta http-equiv="content-language" content="{{ .Site.Language }}">
<link rel="sitemap" type="application/xml" title="Sitemap" href="{{ .Site.BaseURL }}sitemap.xml" />

<!-- SEO METADATA -->
<meta name="description" content="{{ $description | truncate 160 }}">
<meta name="keywords" content="{{ with .Params.keywords }}{{range .}}{{.}},{{end}} {{else}} {{ with .Site.Params.keywords }}{{range .}}{{.}},{{end}}{{end}} {{ end }}" />
<meta property="og:title" content="{{ .Title }}">
<meta property="og:description" content="{{ $description | truncate 160 }}">
{{ if .IsPage }}
<meta property="og:type" content="article">
{{ $pubDate := .Date }}
{{ if .Date.IsZero }}
  {{ with .GitInfo }}
    {{ with .Ancestors.Reverse | first 1 }}
      {{ range . }}
        {{ $pubDate = .AuthorDate }}
      {{ end }}
    {{ else }}
      {{ $pubDate = .AuthorDate }}
    {{ end }}
  {{ end }}
{{ end }}
<meta property="article:published_time" content="{{ $pubDate.Format $ISO8601 | safeHTML }}">
<meta property="article:modified_time" content="{{.Lastmod.Format $ISO8601 | safeHTML }}">
{{ with .Params.tags }}
<meta property="article:section" content="{{ index . 0 }}" />
{{ range . }}
<meta property="article:tag" content="{{ . }}" />
{{ end }}
{{ end }}
{{ else }}
<meta property="og:type" content="website">
{{ end }}
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:site_name" content="{{ .Site.Title }}">
<meta property="og:updated_time" content="{{ .Lastmod.Format $ISO8601 | safeHTML }}">
<meta property="og:locale" content="{{ .Site.Language }}">
{{ if .Translations}}
    {{ range .AllTranslations }}
        <meta property="og:locale:alternate" content="{{ .Language.LanguageName }}">
    {{ end }}
{{ end}}

<!-- IMAGE -->
{{- with .Page.Params.images }}
  {{- range first 1 . }}
    {{- $alt := .alt }}
    {{- with $.Page.Resources.GetMatch .src }}
      <meta property="og:image" content="{{ .Permalink }}" />
      <meta property="og:image:width" content="{{ .Width }}" />
      <meta property="og:image:height" content="{{ .Height }}" />
      {{- with $alt }}
        <meta property="og:image:alt" content="{{ . }}" />
      {{- end }}
    {{- end }}
  {{- end }}
{{- end }}


<!-- TWITTER CARD METADATA -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ .Title }}">
<meta name="twitter:description" content="{{$description}}">
{{- with .Page.Params.images -}}
  {{- range first 1 . -}}
    {{- with $.Page.Resources.GetMatch .src }}
      <meta name="twitter:image" content="{{ .Permalink }}" />
    {{- end }}

    {{- with .alt }}
      <meta name="twitter:image:alt" content="{{ . }}" />
    {{- end }}
  {{- end -}}
{{- end -}}

<!-- PAGE LINKS -->
<link rel="canonical" href="{{ .Permalink }}" itemprop="url" />
{{ if .Translations}}
    <link rel="alternate" href="{{ .Permalink }}" hreflang="x-default">
    {{ range .AllTranslations }}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" title="{{ .Language.LanguageName }}">
    {{ end }}
{{ end}}

<!-- MOBILE WEB APP -->
<meta name="apple-mobile-web-app-title" content="{{ $title }}" />
<meta name="application-name" content="{{ $title }}" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="theme-color" content="#0369a1">

<!-- FAVICONS -->
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="48x48" href="/favicon/favicon-48x48.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="144x144" href="/favicon/favicon-144x144.png">
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="/favicon/android-chrome-512x512.png">
{{ if (fileExists "static/site.webmanifest") }}<link rel="manifest" href="/site.webmanifest">{{ end }}

{{ partial "seo/json-ld/json-ld.html" . }}

{{ partial "dns-prefetch.html" . }}