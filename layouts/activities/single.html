{{ define "main" }}

<!-- Activity Hero Section with Full-Width Image -->
<section class="relative overflow-hidden bg-gray-900 mt-[56px]">
    {{ with index .Params.images 0 }}
    <div class="absolute inset-0 w-full h-full">
        {{ partial "components/images/image.html" (dict "src" .src "alt" .alt "preset" "hero") }}
    </div>
    {{ end }}
    
    <!-- Subtle Overlay - just slight darkening at bottom for text readability -->
    <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/20"></div>
    
    <!-- Hero Content - Heights match image crop aspect ratios -->
    <div class="relative h-[512px] md:h-[683px] lg:h-[720px] flex items-end">
        <div class="container w-full pb-8 md:pb-12">
            <div class="max-w-2xl bg-black/20 backdrop-blur-sm rounded-xl p-6 md:p-8 lg:p-10">
                {{ if or .Params.quality .Params.information.options.varde_experience_quality }}
                <div class="flex items-center gap-3 mb-6 flex-wrap">
                    {{ with .Params.quality }}
                    <span class="inline-block bg-[#e09a00] text-white px-4 py-2 rounded-lg text-sm font-semibold uppercase tracking-wide shadow-lg">
                        {{ . }}
                    </span>
                    {{ end }}
                    {{ with .Params.information.options.varde_experience_quality }}
                    <img class="w-20 h-auto drop-shadow-lg" alt="Varde Experience Quality Badge" src="/images/varde-experience-quality.png" loading="lazy" />
                    {{ end }}
                </div>
                {{ end }}
                
                <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-white leading-tight mb-4">
                    {{ .Title }}
                </h1>
                
                {{ with .Params.summary }}
                <p class="text-lg md:text-xl text-white/95 leading-relaxed max-w-xl">
                    {{ . }}
                </p>
                {{ end }}
            </div>
        </div>
    </div>

    <style>
        section picture img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
    </style>
</section>

<!-- Quick Info & Booking Section - Nordic Minimalism -->
<section class="bg-white border-b border-gray-200">
    <div class="container">
        <!-- Minimalist Info & Booking Layout - Always Inline -->
        <div class="flex flex-col sm:flex-row gap-6 sm:gap-8 lg:gap-12 items-start sm:items-center justify-between">
            <!-- Info Section - Inline Row -->
            <div class="w-full sm:flex-1">
                <div class="flex flex-col sm:flex-row gap-4 sm:gap-6 lg:gap-12 items-start sm:items-center">
                    <!-- Duration -->
                    {{ with .Params.product_info.duration }}
                    <div class="pb-4 sm:pb-0 border-b sm:border-b-0 sm:border-r border-gray-200 sm:pr-6 lg:pr-12">
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-widest mb-1 sm:mb-2">Duration</p>
                        <p class="text-lg sm:text-xl lg:text-2xl lg:text-3xl font-bold text-gray-900">{{ .hours }}h{{ with .minutes }} {{ . }}m{{ end }}</p>
                    </div>
                    {{ end }}
                    
                    <!-- Private Party Size -->
                    {{ with .Params.product_info.prices }}
                    <div class="pb-4 sm:pb-0 border-b sm:border-b-0 sm:border-r border-gray-200 sm:pr-6 lg:pr-12">
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-widest mb-1 sm:mb-2">Private Party</p>
                        <p class="text-lg sm:text-xl lg:text-2xl lg:text-3xl font-bold text-gray-900">Up to {{ range last 1 . }}{{ .person_number }}{{ end }}</p>
                    </div>
                    {{ end }}
                    
                    <!-- Price -->
                    {{ with .Params.product_info.prices }}
                    <div>
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-widest mb-1 sm:mb-2">Price per person</p>
                        {{ range first 1 . }}
                        <p class="text-lg sm:text-xl lg:text-2xl lg:text-3xl font-bold text-gray-900">{{ .price }} NOK</p>
                        {{ end }}
                    </div>
                    {{ end }}
                </div>
            </div>
            
            <!-- Booking Button (right) -->
            <div class="w-full sm:w-auto sm:flex-shrink-0">
                                
                <!-- Booking Modal - Include the full booking partial with modal -->
                {{ partial "activity/booking" . }}

            </div>
        </div>
    </div>
</section>


<!-- Content Navigation & Sections -->
<section class="bg-white">
    <div class="container">
        <!-- Inline TOC Navigation (only if more than just About) -->
        {{ if or (or .Params.information.practical .Params.information.options.global_practical .Params.information.options.global_bike_practical) (gt (len .Params.images) 1) }}
        <nav class="mb-12 flex flex-wrap gap-4 md:gap-6 border-b border-gray-200 pb-6">
            <a href="#about" class="text-sm md:text-base font-semibold text-gray-700 hover:text-[#e09a00] transition-colors duration-300">About</a>
            {{ if or .Params.information.practical .Params.information.options.global_practical .Params.information.options.global_bike_practical }}
            <a href="#practical" class="text-sm md:text-base font-semibold text-gray-700 hover:text-[#e09a00] transition-colors duration-300">Practical Info</a>
            {{ end }}
            {{ if gt (len .Params.images) 1 }}
            <a href="#gallery" class="text-sm md:text-base font-semibold text-gray-700 hover:text-[#e09a00] transition-colors duration-300">Gallery</a>
            {{ end }}
        </nav>
        {{ end }}
        
        <!-- About Section -->
        <div class="mb-16 -mt-[56px] pt-[56px]" id="about">
            <article class="max-w-none text-gray-700 leading-relaxed">
                {{ partial "activity/about" . }}
            </article>
        </div>
    </div>
</section>

{{ if or .Params.information.practical .Params.information.options.global_practical .Params.information.options.global_bike_practical }}
<section>
<div class="container">
        <!-- Practical Info Section (only if content exists) -->
        <div id="practical">
            <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold mb-8 text-gray-900">Practical Information</h2>
            <article class="max-w-none text-gray-700">
                {{ partial "activity/practical" . }}
            </article>
        </div>
    </div>
</section>
{{ end }}

<!-- Photo Gallery Section (if more than 1 image) -->
{{ if gt (len .Params.images) 1 }}
<section class="" id="gallery">
    <div class="container">
        <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold mb-12 text-gray-900">Gallery</h2>
        {{ with .Params.images }}
            {{ partial "components/images/carousel-full" . }}
        {{ end }}
    </div>
</section>
{{ end }}

<style>
    html {
        scroll-behavior: smooth;
        scroll-timeline: view();
    }
    
    @supports (animation-timeline: view()) {
        html {
            animation-duration: 2s;
            animation-timeline: view();
        }
    }
    
    * {
        scroll-margin-top: 80px;
    }
</style>

{{ end }}